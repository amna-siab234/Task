<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">

</head>
<body>
    <h1>Calculator</h1>
    <div class="border border-primary border-3 rounded p-3 d-inline-block hero">
        <div class="mb-3 border border-primary border-3 rounded">
          <input type="text" class="form-control "  placeholder="calculation"  id="ans">
            <input type="text" class="form-control "  placeholder="Enter calculation" id="calculator-input">
        </div>
        <div class="calculator-grid">
           
            <div><button class="btn  w-100 h-100">MRC</button></div>
            <div><button class="btn  w-100 h-100">(</button></div>
            <div><button class="btn  w-100 h-100">)</button></div>
            <div><button class="btn  w-100 h-100" style="background-color: red;">AC</button></div>
            <div><button class="btn  w-100 h-100">&radic;</button></div>
            
        
            <div><button class="btn  w-100 h-100">+/-</button></div>
            <div><button class="btn  w-100 h-100">7</button></div>
            <div><button class="btn  w-100 h-100">8</button></div>
            <div><button class="btn  w-100 h-100">9</button></div>
            <div><button class="btn  w-100 h-100">X</button></div>
            
          
            <div><button class="btn  w-100 h-100">%</button></div>
            <div><button class="btn  w-100 h-100">4</button></div>
            <div><button class="btn  w-100 h-100">5</button></div>
            <div><button class="btn  w-100 h-100">6</button></div>
            <div><button class="btn  w-100 h-100">-</button></div>
            
          
            <div class="plus-button">
                <button class="btn  w-100 h-100">+</button>
            </div>
            
         
            <div><button class="btn  w-100 h-100" style="background-color: blueviolet;">CE</button></div>
            <div><button class="btn  w-100 h-100">1</button></div>
            <div><button class="btn  w-100 h-100">2</button></div>
            <div><button class="btn  w-100 h-100">3</button></div>
            
           
            <div><button class="btn  w-100 h-100">0</button></div>
            <div><button class="btn  w-100 h-100">.</button></div>
            <div><button class="btn  w-100 h-100">=</button></div>
            <div><button class="btn  w-100 h-100">&divide;</button></div>
        </div>
    </div>






    <script>
       let input = document.getElementById('calculator-input');
let buttons = document.querySelectorAll('.calculator-grid button');
let ansDisplay = document.getElementById('ans');
let isResult = false; 

const operators = ['+', '-', 'X', '÷', '%', ')'];
buttons.forEach(button => {
  button.addEventListener('click', () => {
    const btnvalue = button.textContent;

   
    if (isResult) {
      input.value = '';
      ansDisplay.value=''
      isResult = false;
    }
    
   
    if (input.value === '' && operators.includes(btnvalue) && btnvalue !== '-') {
      return;
    }

  
    if (btnvalue === 'CE') {
      input.value = input.value.slice(0, -1);
      ansDisplay.value = ansDisplay.value.slice(0, -1);
    } 
    
    else if (btnvalue === 'AC') {
      input.value = '';
      ansDisplay.value = '';
    } 
 
    else if (btnvalue === '=') {
      try {
      // let expression = input.value.replaceAll('X', '*') && input.value.replaceAll('÷', '/') 
    // && input.value.replaceAll('%', '%') && input.value.replaceAll('√', 'Math.sqrt(') + ')'
    //  && input.value.replaceAll('+', '+') && input.value.replaceAll('-', '-') ;
    let expression = input.value
      .replaceAll(/X/g, '*')     
      .replaceAll(/÷/g, '/')
      .replaceAll(/%/g, '%')
    //   .replaceAll(/\+/g, '+')
    //   .replaceAll(/-/g, '-')
    //   .replaceAll(/√/g, 'Math.sqrt(') + ')';
      .replace(/√(\d+(\.\d+)?)/g, 'Math.sqrt($1)')
      .replace(/(\d)\(/g, '$1*(')    
  .replace(/\)(\d)/g, ')*$1')    
  .replace(/\)\(/g, ')*(');      

        input.value = eval(expression);        
        isResult = true;                
      } catch {
        input.value = 'Error';
        isResult = true;                
      }
    } 
    
   
    
    else {
        // let isResult = true; 
        // let y=ans.innerText;
        // ans.innerText= y;
        ansDisplay.value += btnvalue;
      input.value += btnvalue;
    }
  });
});

        
         </script>
</body>
</html>